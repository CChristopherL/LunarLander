#include "comet1.h"
#include "renderer.h"
#include "debris.h"
#include "noise.h"

void initComet1(comet1_t *comet, vector_t position, vector_t velocity) {
	/*static const uint16_t cometImage[12][128] = {
		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //00
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,
		 0x0020,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,
		 0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //01
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x0020,0x0020,0x0020,0x0020, //02
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //03
		 0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //04
		 0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //05
		 0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //06
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,
		 0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020, //07
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x38B1,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B1,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020, //08
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //09
		 0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //10
		 0x0020,0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //11
		 0x0020,0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B1,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x38B1,0x38B1,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x38B0,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x38B0,0x38B0,0x38B0,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		 {0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, //12
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		 0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020}
	};*/
	static const cometImage[12][45] =
	{
			{0xB820,0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,0xB820,
			0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,0xB820,
			0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,0xB820,
			0xB820,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,0xB820,0xB820,
			0xB820,0xB820,0xB8DF,0xB8DF,0xB8DF,0xB820,0xB820,0xB820,0xB820},

			{0xB820,0xB820,0xB8DC,0xB8DB,0xB8DB,0xB8DC,0xB8DC,0xB820,0xB820,
			0xB820,0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,
			0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
			0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,0xB820,0xB820,0xB820,
			0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

			{0xB820,0xB8DC,0xB8DC,0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,
			0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,
			0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
			0xB820,0xB820,0xB820,0xB820,0xB8DF,0xB8DF,0xB8DF,0xB820,0xB820,
			0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

			{0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,0xB820,0xB820,
			0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,
			0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
			0xB820,0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DF,0xB8DF,0xB820,0xB820,
			0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

			{0xB820,0xB820,0xB8DC,0xB8DC,0xB8DC,0xB820,0xB820,0xB820,0xB820,
			0xB820,0xB8DC,0xB8DC,0xB8DC,0xB8DC,0xB8DC,0xB820,0xB820,0xB820,
			0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,
			0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,0xB820,
			0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,0xB820,0xB820},

			{0xB820,0xB820,0xB820,0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,
			0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,
			0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,0xB820,
			0xB820,0xB8DF,0xB8DF,0xB8DB,0xB8DB,0xB8DF,0xB820,0xB820,0xB820,
			0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

			{0xB820,0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB8DC,0xB8DC,0xB820,
			0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,
			0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DF,
			0xB820,0xB820,0xB8DF,0xB8DF,0xB8DF,0xB820,0xB820,0xB820,0xB820,
			0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

			{0xB820,0xB8DC,0xB8DC,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,0xB820,
			0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,
			0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,
			0xB820,0xB820,0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
			0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

			{0xB820,0xB8DC,0xB8DC,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,0xB820,
						0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,
						0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,
						0xB820,0xB820,0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
						0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

						{0xB820,0xB8DC,0xB8DC,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,0xB820,
									0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,
									0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,
									0xB820,0xB820,0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
									0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

									{0xB820,0xB8DC,0xB8DC,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,0xB820,
												0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,
												0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,
												0xB820,0xB820,0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
												0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820},

												{0xB820,0xB8DC,0xB8DC,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,0xB820,
															0xB8DC,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DC,0xB820,0xB820,
															0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB8DB,0xB820,
															0xB820,0xB820,0xB820,0xB8DF,0xB8DB,0xB8DB,0xB8DB,0xB8DF,0xB820,
															0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820,0xB820}
	};
	static const vector_t cometImageSize = {9, 5};

	comet->image = cometImage;
	comet->imageSize = cometImageSize;

	comet->position = position;
	comet->velocity = velocity;
	comet->frame = 0;
	comet->broken = 0;
}

void breakComet1(comet1_t *comet) {
	comet->broken = 1;

	// Initialize the debris
	vector_t debris1Position = {comet->position.x, comet->position.y};
	vector_t debris1Velocity = {300, -300};
	initDebris(&(comet->debris1), debris1Position, debris1Velocity, 0);

	vector_t debris2Position = {comet->position.x, comet->position.y + 3};
	vector_t debris2Velocity = {200, 100};
	initDebris(&(comet->debris2), debris2Position, debris2Velocity, 1);

	vector_t debris3Position = {comet->position.x + 6, comet->position.y + 3};
	vector_t debris3Velocity = {-300, -200};
	initDebris(&(comet->debris3), debris3Position, debris3Velocity, 2);
}

static void updatePhysics(comet1_t *comet, uint32_t deltaTime) {
	// Apply gravity
	//comet->velocity.y += deltaTime;

	// Apply velocity
	comet->position.x += comet->velocity.x * deltaTime;
	comet->position.y += comet->velocity.y * deltaTime;

	// Wrap x position
	comet->position.x = (comet->position.x < 0) ? (comet->position.x & 262143) - 1 : (comet->position.x & 262143);
}

static void checkCollisions(comet1_t *comet, uint32_t deltaTime) {
	vector_t collisionPosition = convertToDisplayPosition(comet->position);
	collisionPosition.y += comet->imageSize.y - 1;
	collisionPosition.x += (comet->imageSize.x >> 1);
	if ((comet->broken == 0) && (collisionPosition.y > getTerrainHeight(collisionPosition))) {
		breakComet1(comet);
	}
}

void updateComet1(comet1_t *comet, uint32_t deltaTime) {
	updatePhysics(comet, deltaTime);

	// Apply animation
	if (comet->broken == 0) {
		comet->frame += (deltaTime << 1);
		if ((comet->frame >> 4) > 10) {
			comet->frame = 0;
		}
	}

	checkCollisions(comet, deltaTime);

	vector_t displayPosition = {(comet->position.x >> 10), (comet->position.y >> 10)};

	// Draw the debris
	if (comet->broken == 1) {

		// Erase the comet
		if ((comet->frame >> 4) < 11) {
			comet->frame = (11 << 4);
			addToBuffer(comet->image[10], displayPosition, comet->imageSize);
		}

		updateDebris(&(comet->debris1), deltaTime);
		updateDebris(&(comet->debris2), deltaTime);
		updateDebris(&(comet->debris3), deltaTime);
	} else {

		// Send the comet to buffer
		addToBuffer(comet->image[(comet->frame) >> 4], displayPosition, comet->imageSize);
	}
}
