#include "gameOver.h"
#include "renderer.h"

void initGameOver(gameOver_t *gameOver) {
	static uint16_t gameOverTextImage[4][168] = {
		{0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0X3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,
	    0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,
	    0x3820,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,
	    0x3820,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820},

		{0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x09DB,0x09DB,0x3FDB,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3FDF,0x3FDF,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,
		0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,0x3820,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820},

		{0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3820,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x3820,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x3820,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,
		0x09DB,0x09DB,0x09DB,0x09DB,0x3820,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3820,
		0x3820,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,0x3820,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,
		0x3820,0x3820,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,0x3820,0x3820,0x3820,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,0x3820},

		{0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,0x3820,0x3820,
		0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,
		0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3020,0x3020,0x3020,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3820,0x3820,
		0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3820,0x3820,
		0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDB,0x3820,0x3820,0x3FDF,0x09DB,0x09DB,0x09DB,0x09DB,0x3FDC,0x3820,0x3820,
		0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820,0x3820,0x3820,0x3FDF,0x3FDF,0x3FDF,0x3FDF,0x3820,0x3820}
	};
	static vector_t gameOverTextImageSize = {28, 6};
	static vector_t gameOverTextImagePosition = {100, 40};
	gameOver->image = gameOverTextImage;
	gameOver->imageSize = gameOverTextImageSize;
	gameOver->imagePosition = gameOverTextImagePosition;
	gameOver->mainMenu = 0;
	gameOver->displayTime = 0;

	for (uint8_t r = 0; r < 2; r++) {
		for (uint8_t c = 0; c < 2; c++) {
			vector_t chunkPosition;
			chunkPosition.x = gameOver->imagePosition.x + gameOver->imageSize.x * c;
			chunkPosition.y = gameOver->imagePosition.y + gameOver->imageSize.y * r;
			drawASCIIImage(gameOver->image[r * 2 + c], chunkPosition, gameOver->imageSize);
		}
	}
}

void updateGameOver(gameOver_t *gameOver, uint32_t deltaTime) {
	gameOver->displayTime += deltaTime;

	if (gameOver->displayTime > 500) {
		gameOver->mainMenu = 1;
	}
}
