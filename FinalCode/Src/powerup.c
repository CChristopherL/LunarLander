#include "powerup.h"

void initPowerup(powerup_t *powerup, vector_t position, uint8_t type) {
	static uint16_t powerupImage[5][45] = {
		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, // Shotgun
		0x106F,0x0020,0x0020,0x0020,0x106F,0x0020,0x0020,0x0020,0x106F,
		0x0020,0x105C,0x0020,0x0020,0x107C,0x0020,0x0020,0x102F,0x0020,
		0x0020,0x0020,0x105C,0x0020,0x107C,0x0020,0x102F,0x0020,0x0020,
		0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x106F,0x0020,0x0020,0x0020,0x106F,0x0020,0x0020, // Six Shooter
		0x0020,0x0020,0x0020,0x105C,0x0020,0x102F,0x0020,0x0020,0x0020,
		0x106F,0x102D,0x102D,0x0020,0x0020,0x0020,0x102D,0x102D,0x106F,
		0x0020,0x0020,0x0020,0x102F,0x0020,0x105C,0x0020,0x0020,0x0020,
		0x0020,0x0020,0x106F,0x0020,0x0020,0x0020,0x106F,0x0020,0x0020},

		{0x0020,0x4820,0x48DC,0x48DC,0x4820,0x48DC,0x48DC,0x4820,0x0020, // Heart
		0x0020,0x48DB,0x78DF,0x48DB,0x48DB,0x48DB,0x48DB,0x48DB,0x0020,
		0x0020,0x4820,0x48DF,0x48DB,0x48DB,0x48DB,0x48DF,0x4820,0x0020,
		0x0020,0x4820,0x4820,0x4820,0x48DF,0x4820,0x4820,0x4820,0x0020,
		0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, // Fuel Can
		0x0020,0xF8FE,0xF8FE,0x50DC,0x50DC,0x50DC,0x3820,0x0020,0x0020,
		0x0020,0x3820,0x3820,0x50DB,0x50DB,0x50DB,0xF8B5,0x0020,0x0020,
		0x0020,0x3820,0x3820,0x50DF,0x50DF,0x50DF,0x3820,0x0020,0x0020,
		0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020},

		{0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020, // Empty
		0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,
		0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020,0x0020}
	};

	static vector_t powerupImageSize = {9, 5};
	powerup->image = powerupImage;
	powerup->imageSize = powerupImageSize;

	powerup->position = position;

	powerup->type = type;

	// Scale powerup position to fit onto display
	vector_t displayPosition = {(powerup->position.x >> 10), (powerup->position.y >> 10)};
	addToBuffer(powerup->image[type], displayPosition, powerup->imageSize);
}

void updatePowerup(powerup_t *powerup) {
	// Scale powerup position to fit onto display
	vector_t displayPosition = {(powerup->position.x >> 10), (powerup->position.y >> 10)};
	addToBuffer(powerup->image[powerup->type], displayPosition, powerup->imageSize);
}
